## 1. 解释 TCP 中“流”的概念。UDP 中能否形成流? 请说明原因。

在TCP中，“流”指的是传输控制协议（TCP）通过建立一个可靠的、有序的、无错误的、两向字节流来连接网络应用的过程。TCP将来自应用的数据流视为字节序列，并确保接收方能按发送的顺序来获取数据。TCP的流量控制机制确保发送和接收两端的速率能协调一致，这样防止了接收端因处理不过来而导致的数据丢失。

与此不同，UDP（用户数据报协议）是无连接的，它只提供最基本的封装和发送数据的功能，接收方收到的数据包可能是无序的，也可能会出现丢包的现象，更没有流量控制的机制。因此，在UDP中，数据是一次性地以数据报的形式发送的，没有形成数据流的概念。接收方也需要对数据进行封装和解封装，而不是像TCP那样可以直接读取字节流。这也就是为什么说UDP不能形成流的原因。


## 2. Linux 中的 close 函数或 Windows 中的 closesocket 函数属于单方面断开连接的方法，有可能带来一些问题。什么是单方面断开连接?什么情形下会出现问题?

单方面断开连接即只有连接的一端主动将连接关闭，比如在Linux中通过close函数或在Windows中通过closesocket函数执行这样的操作。这样的行为本质上就是发送一个FIN（Finish）标志到对端，告知对方"我已经结束了数据的发送"。

当然，单方面断开连接可能会带来一些问题，如果在数据传输的过程中单方面地断开连接，可能导致以下问题：

1. 数据的丢失：就算是TCP这样的可靠的协议，也有可能在链接关闭的时候，有些数据还在网络中传递，或者还在接收方的缓冲区中没处理完，若此时单方面断开连接，这些数据就会丢失。

2. TIME_WAIT状态的累积：如果某个进程频繁地建立，然后又单方面断开连接，会使得大量处于TIME_WAIT状态的套接字累积，消耗系统资源。

因此，一般推荐的是双方协商断开连接，这种方式叫做四次挥手。

## 3. 什么是半关闭? 针对输出流执行半关闭的主机处于何种状态? 半关闭会导致对方主机接收什么消息?

半关闭（Half-Close）是一个网络通信中的概念，它允许TCP连接的一端停止传送数据，另一端仍能继续发送数据。这是因为TCP连接是全双工的，所以允许这样的操作。

在针对输出流执行半关闭的主机，发送FIN标志位的TCP段给对方，处于"FIN-WAIT"状态，表示已经没有数据要发送了，此时的主机不能再发送数据，但它可以接收数据。

当对方主机收到这样的消息后，会返回ACK给发送FIN的主机来确认收到了关闭连接的请求，同时，对方主机可以继续发送数据到执行关闭操作的主机，直到它也准备好关闭连接，发送FIN给对方。

故，半关闭的特性在于，即使一方完成了数据的发送并请求关闭连接，但仍然可以接收对方发送的数据。这种模式下，即使一方已经发完数据并关闭连接，也不会影响对方继续发送数据。
